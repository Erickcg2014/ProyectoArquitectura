<!-- src/app/features/usuario/home/home.component.html -->

<main class="flex flex-1 justify-center bg-gray-50">
  <div class="w-full max-w-7xl px-4 py-6">
    <!-- Banner promocional -->
    <div class="mb-8 animate-fade-in">
      <div
        class="relative bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl min-h-[320px] overflow-hidden shadow-2xl group cursor-pointer"
      >
        <div
          class="absolute inset-0 bg-cover bg-center opacity-40 group-hover:opacity-50 transition-opacity duration-500"
          style="
            background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuBNfxxMGmwftIIw0fF6ODzgh6b5BcBHGKrqysCDk-gHOB5KBCistd7ZI-30I4zyDrRHCrvdgeJjqrjg1GJmbcaATuy0I8gdxhZlZeH02Dk1Nfh9s0NyWBmO2Cmh76d84veEkXruNQg7aeGZDauX38Bj35FdMjuoVK6bTkf6mIhMMpwG_iydlOuUx8YTlg19VwrSQnokwBh3zgBr-4Ha3d_sQvgkgh0stbA8UpUOrhSvWo1k1iz6NqnYOhLRgKU71AKysfOsUXyms_k');
          "
        ></div>

        <div
          class="relative z-10 flex flex-col justify-center h-full p-8 md:p-12"
        >
          <span
            class="inline-block bg-[#FFE600] text-gray-900 text-xs font-bold px-3 py-1 rounded-full mb-4 w-fit"
          >
            OFERTA ESPECIAL
          </span>
          <h2
            class="text-white text-4xl md:text-5xl font-bold leading-tight mb-4"
          >
            Mid-Season Sale
          </h2>
          <p class="text-white/90 text-xl md:text-2xl font-light mb-6">
            Hasta 30% de descuento
          </p>
          <button
            class="bg-white text-gray-900 px-8 py-3 rounded-full font-bold hover:bg-[#FFE600] transition-all duration-300 w-fit shadow-xl hover:shadow-2xl hover:scale-105 transform"
          >
            Ver ofertas
          </button>
        </div>

        <div
          class="absolute -right-20 -top-20 w-96 h-96 bg-white/10 rounded-full blur-3xl"
        ></div>
        <div
          class="absolute -left-20 -bottom-20 w-96 h-96 bg-white/10 rounded-full blur-3xl"
        ></div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="flex justify-center items-center py-20">
      <div class="relative">
        <div
          class="animate-spin rounded-full h-16 w-16 border-b-4 border-[#1919e6]"
        ></div>
        <div
          class="animate-ping absolute inset-0 rounded-full h-16 w-16 border-4 border-[#FFE600] opacity-20"
        ></div>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="!loading && error" class="text-center py-20">
      <span class="material-symbols-outlined text-red-500 text-8xl mb-4">
        error
      </span>
      <h3 class="text-2xl font-bold text-gray-900 mb-2">
        Error al cargar productos
      </h3>
      <p class="text-gray-600 mb-6">{{ error }}</p>
      <button
        (click)="loadProductsByCategories()"
        class="px-8 py-3 bg-[#1919e6] text-white rounded-lg font-bold hover:bg-[#1515b8] transition-colors"
      >
        Reintentar
      </button>
    </div>

    <!-- Productos por CategorÃ­a -->
    <div *ngIf="!loading && !error && productsByCategory.length > 0">
      <div *ngFor="let category of productsByCategory" class="mb-12">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-3xl font-bold text-gray-900 flex items-center gap-3">
            <span class="material-symbols-outlined text-[#1919e6] text-4xl">
              category
            </span>
            {{ category.categoria }}
          </h2>
          <button
            class="text-[#1919e6] font-semibold hover:underline flex items-center gap-1"
          >
            Ver todos
            <span class="material-symbols-outlined">arrow_forward</span>
          </button>
        </div>

        <app-product-carousel
          [products]="category.productos"
          [title]="category.categoria"
        ></app-product-carousel>
      </div>
    </div>

    <!-- Empty State -->
    <div
      *ngIf="!loading && !error && productsByCategory.length === 0"
      class="text-center py-20"
    >
      <span class="material-symbols-outlined text-gray-300 text-8xl mb-4">
        inventory_2
      </span>
      <h3 class="text-2xl font-bold text-gray-700 mb-2">
        No hay productos disponibles
      </h3>
      <p class="text-gray-500 text-lg">
        Vuelve pronto para ver nuestros productos
      </p>
    </div>
  </div>
</main>
