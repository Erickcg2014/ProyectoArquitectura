<!-- src/app/shared/product-card/product-card.component.html -->

<a
  [routerLink]="['/product', product.id]"
  class="flex h-full flex-col rounded-lg bg-white shadow-sm hover:shadow-2xl transition-all duration-300 min-w-[240px] max-w-[280px] border border-gray-100 cursor-pointer group overflow-hidden animate-fade-in-up"
>
  <!-- Imagen del producto con overlay en hover -->
  <div class="relative w-full aspect-square overflow-hidden bg-gray-50">
    <div
      class="w-full h-full bg-center bg-no-repeat bg-contain group-hover:scale-110 transition-transform duration-500 ease-out"
      [style.background-image]="'url(' + product.images[0] + ')'"
      [attr.data-alt]="product.description"
    ></div>

    <!-- Badge de descuento (si aplica) -->
    <div
      *ngIf="product.originalPrice"
      class="absolute top-2 left-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded"
    >
      {{ getDiscount() }}% OFF
    </div>

    <!-- Botón rápido de agregar (aparece en hover) -->
    <div
      class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100"
    >
      <button
        (click)="addToCart($event)"
        class="bg-white text-gray-900 px-4 py-2 rounded-full font-semibold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-all duration-300"
      >
        <span class="flex items-center gap-2">
          <span class="material-symbols-outlined text-xl"
            >add_shopping_cart</span
          >
          Agregar
        </span>
      </button>
    </div>
  </div>

  <!-- Información del producto -->
  <div class="flex flex-col flex-1 justify-between p-4 gap-3 bg-white">
    <div class="flex-1">
      <!-- Nombre del producto -->
      <h3
        class="text-gray-900 text-sm font-normal leading-snug line-clamp-2 mb-2 group-hover:text-[#1919e6] transition-colors"
      >
        {{ product.name }}
      </h3>

      <!-- Precio original tachado (si aplica) -->
      <div
        *ngIf="product.originalPrice"
        class="text-gray-400 text-xs line-through mb-1"
      >
        ${{ product.originalPrice.toFixed(2) }}
      </div>

      <!-- Precio principal -->
      <div class="flex items-baseline gap-1 mb-2">
        <span class="text-2xl font-light text-gray-900">
          ${{ Math.floor(product.price) }}
        </span>
        <span class="text-lg font-light text-gray-900">
          {{ getCents() }}
        </span>
      </div>

      <!-- Envío gratis -->
      <div
        class="flex items-center gap-1 text-green-600 text-xs font-semibold mb-2"
      >
        <span class="material-symbols-outlined text-sm">local_shipping</span>
        Envío gratis
      </div>

      <!-- Rating -->
      <div *ngIf="product.rating" class="flex items-center gap-1">
        <div class="flex">
          <span
            *ngFor="let star of [1, 2, 3, 4, 5]"
            class="material-symbols-outlined text-sm"
            [class.text-[#FFE600]="star <= product.rating!"
            [class.text-gray-300]="star > product.rating!"
            style="font-variation-settings: 'FILL' 1"
          >
            star
          </span>
        </div>
        <span class="text-gray-500 text-xs">({{ product.reviewCount }})</span>
      </div>
    </div>
  </div>
</a>
