server:
  port: 8080

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      routes:
        # Microservicio de Productos
        - id: producto-service
          uri: http://localhost:30083  # NodePort del service
          predicates:
            - Path=/api/producto/**
          # SIN StripPrefix - el path se mantiene completo
            
        # Microservicio de Usuario
        - id: usuario-service
          uri: http://localhost:30084
          predicates:
            - Path=/api/usuario/**
            
        # Microservicio de Pagos
        - id: pago-service
          uri: http://localhost:30085
          predicates:
            - Path=/api/pago/**
            
        # Microservicio de MÃ©tricas
        - id: metrica-service
          uri: http://localhost:30086
          predicates:
            - Path=/api/metrica/**
        
        # Microservicio de Carrito
        - id: carrito-service
          uri: http://localhost:30087
          predicates:
            - Path=/api/carrito/**

        # Microservicio de Recomendaciones
        - id: recomendaciones-service
          uri: http://localhost:30088
          predicates:
            - Path=/api/recomendaciones/**
        
        # Microservicio de Orden
        - id: orden-service
          uri: http://localhost:30089
          predicates:
            - Path=/api/orden/**

      globalcors:
        cors-configurations:
          '[/**]':
            allowedOrigins: "*"
            allowedMethods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
            allowedHeaders: "*"